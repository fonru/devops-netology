# Описание playbook site.yml

Описание play:
   
> name: Install and run Clickhouse

```text
Play по скачиванию и установки пакета clickhouse с указанием определенной версии через vars. Также используется секция rescue для возможности использования альтернативного url загрузки в случае сбоя основного. После установки пакета отрабатывает handler по запуску сервиса ClickHouse В конце выполняется команда по созданию базы `clickhouse-client -q 'create database logs` c обработкой ошибок.
```

> name: Install vector

```text
Play загружает и устанавливает пакет vector, после чего через handler запускается сервис.
```

> name: Install Lighthouse

```text
Play по установки Lighthouse. Сперва устанавливается Extra Packages, затем nginx и git(т.к centos была на минималках). Далее есть закомментированная таска по добавлению правил файрвола, для того чтоб открыть 80_tcp(необязательная). Далее вычиается директория по умолчанию сайта nginx. После клонируем в html директорию из репорзитория lighhous исходники и перезагружаем nginx через handler.
```